{% load staticfiles %}
<!DOCTYPE html>
<html>
    <head>
        <title>报告预览</title>
        <!-- 引入 Bootstrap -->
        
        <link href="{% static 'reports/css/bootstrap.min.css' %}"" rel="stylesheet">
        <script type="text/javascript" src="{% static 'reports/js/jquery.js' %}"></script>
        <!-- 包括所有已编译的插件 -->
        <script type="text/javascript" src="{% static 'reports/js/bootstrap.min.js' %}"></script>
        <script type="text/javascript" src="{% static 'reports/js/index.js' %}"></script>
        <script type="text/javascript">
        function change(id){
            $('#changeModal').modal('show');
            $('#change_button').click(function(){
                window.location.href='/reports/'+id+'/change/'; 
            })
        }
        function delete_report(report_id){
            $('#deleteModal').modal('show');
            $('#delete_button').click(function(){
                $.ajax({
                    type: 'get',
                    url: '/reports/'+report_id+'/delete/' ,
                });
            })
            /*//ajax*/
        }
        </script>
    </head>
  <body>
    <!--div class="jumbotron" style='background-image:url("{% static 'reports/images/Partitura_by_Vincijun.jpg' %}");'-->
      <!--  style='background-image:url("{% static 'reports/images/Partitura_by_Vincijun.jpg' %}");' -->
      <!--img src="{% static 'reports/images/Partitura_by_Vincijun.jpg' %}" class="img-rounded"-->
      <div class="container-fluid bg-success" >
        <div class="row">
        <div class="col-lg-6 col-lg-offset-3">
          <div class="row">
          <div class="col-lg-12">
            <h1 align="center">故障报告生成系统</h1>
            <p align="center">这是一个故障报告生成系统</p>
          </div>
          </div>
          <div class="row">
          <div class="col-lg-2 col-lg-offset-8">
              <p align="center">
                <a class="btn btn-primary  btn-block" role="button" href="{% url 'reports:create' %}">
                创建报告
                </a>
              </p >
          </div>
          <div class="col-lg-2">
              <p align="center">
                <a class="btn btn-primary  btn-block" role="button" href="{% url 'reports:sendmail' %}">
                联系作者
                </a>
              </p >
          </div>
          </div>
                
          <div class="row" id="view-create-button">
          <div class="col-lg-12">
            <table class="table table-hover">
               <caption></caption>
               <thead>
                  <tr>
                     <th>序号</th>
                     <th>创建时间</th>
                     <th>摘要</th>
                     <th>操作</th>
                  </tr>
               </thead>
               <tbody>
               {% if latest_report_list %}
                  {% for report in latest_report_list %}
                  <tr >
                     <td>{{ report.id }}</td>
                     <td>{{ report.create_time }}</td>
                     <td>{{ report.abstract }}</td>
                     <td>
                       <div class="btn-group">
                       <!-- 按钮大小 xs sm none-->
                       <a class="btn btn-danger  btn-sm" onclick="delete_report({{report.id}})" >删除</a>
                       <!--a class="btn btn-success btn-sm" href="{% url 'reports:change' report.id %}">修改</a-->
                       <a class="btn btn-success btn-sm" onclick="change({{report.id}})">修改</a>
                       <a class="btn btn-primary btn-sm" href="{% url 'reports:view' report.id %}">预览</a>
                       </div>
                        
                     </td>
                  </tr>
                  {% endfor %}
               {% else %}
                  <tr>
                    <td>No reports are available.</td>
                 </tr>
               {% endif %}
               </tbody>
            </table>
          </div>
          </div>

          <br><br><br><br><br><br><br><br><br>
        </div>
        </div> 
      </div>

<!-- 模态框（Modal） -->
<div class="modal fade" id="changeModal" tabindex="-1" role="dialog" 
   aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
               data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="myModalLabel">
               提示
            </h3>
         </div>
         <div class="modal-body">
            <h4>修改报告会覆盖之前保存的mrtg图片,确认修改么?</h4>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-default" 
               data-dismiss="modal">关闭
            </button>
            <button type="button" class="btn btn-primary" id="change_button">
               确定修改
            </button>
         </div>
      </div><!-- /.modal-content -->
  </div>
</div><!-- /.modal -->

<!-- 模态框（Modal） -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" 
   aria-labelledby="deModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" 
               data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h3 class="modal-title" id="deModalLabel">
               警告
            </h3>
         </div>
         <div class="modal-body">
            <h4>暂不提供删除功能,如需删除请联系作者!</h4>
         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-danger" id="delete_button" data-dismiss="modal" style="display:none;">
               隐藏按钮-删除
            </button>
            <button type="button" class="btn btn-default" 
               data-dismiss="modal">关闭
            </button>
            <button type="button" class="btn btn-primary" data-dismiss="modal">
               确定
            </button>
         </div>
      </div><!-- /.modal-content -->
  </div>
</div><!-- /.modal -->

  </body>
</html>
